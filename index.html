<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bot Setup Guide â€” Humanity Labs</title>
  <meta name="description" content="Build your own AI assistant in under an hour. Step-by-step guide by Humanity Labs.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23111'/><text y='66' font-size='44' font-family='system-ui' fill='%23d4a843' x='50' text-anchor='middle' font-weight='700'>HL</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #fafafa; --card: #fff;
      --border: #e5e5e5; --border-light: #f0f0f0;
      --text: #1a1a1a; --body: #444; --dim: #888;
      --accent: #b8922a; --accent-bg: rgba(184,146,42,.08); --accent-border: rgba(184,146,42,.3);
      --green: #16a34a; --green-bg: rgba(22,163,74,.07);
      --blue: #2563eb;
      --radius: 12px;
      --sans: 'Inter', -apple-system, sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box }
    body { font-family: var(--sans); background: var(--bg); color: var(--body); line-height: 1.75; font-size: 16px; -webkit-font-smoothing: antialiased }
    a { color: var(--accent); text-decoration: none } a:hover { text-decoration: underline }
    strong { color: var(--text) }
    code { background: #f0f0f0; padding: 2px 7px; border-radius: 4px; font-size: .85em; font-family: 'SF Mono', Consolas, monospace }

    /* Header */
    header { padding: 18px 24px; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center }
    .logo { font-size: 13px; font-weight: 700; color: var(--text) }
    .logo span { color: var(--dim); font-weight: 400 }
    header nav a { font-size: 13px; color: var(--dim); margin-left: 20px } header nav a:hover { color: var(--text) }

    /* Wizard shell */
    .wizard {
      min-height: calc(100vh - 57px);
      display: flex; flex-direction: column; align-items: center;
      padding: 40px 24px 80px;
    }

    /* Progress bar */
    .progress {
      width: 100%; max-width: 580px; margin-bottom: 40px;
    }
    .progress-track {
      height: 3px; background: var(--border-light); border-radius: 2px; overflow: hidden;
    }
    .progress-fill {
      height: 100%; background: var(--accent); border-radius: 2px;
      transition: width .4s ease;
    }
    .progress-label {
      font-size: 12px; color: var(--dim); margin-top: 8px; text-align: right;
    }

    /* Step card */
    .step-card {
      width: 100%; max-width: 580px;
      background: var(--card); border: 1px solid var(--border);
      border-radius: 16px; padding: 36px 40px;
      animation: slide-in .25s ease;
    }
    @keyframes slide-in { from { opacity: 0; transform: translateY(8px) } to { opacity: 1; transform: translateY(0) } }
    @media (max-width: 640px) { .step-card { padding: 24px 20px } }

    .step-phase { font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--accent); margin-bottom: 6px }
    .step-title { font-size: 24px; font-weight: 800; color: var(--text); letter-spacing: -.02em; margin-bottom: 10px; line-height: 1.2 }
    .step-body { font-size: 15px; color: var(--body); line-height: 1.75 }
    .step-body p { margin-bottom: 12px } .step-body p:last-child { margin-bottom: 0 }
    .step-body ul { padding-left: 20px; margin-bottom: 12px }
    .step-body li { margin-bottom: 6px }
    .step-body strong { color: var(--text) }

    /* Bot message (copy-paste for Telegram) */
    .bot-msg {
      margin: 16px 0;
      background: #fffbeb; border: 1.5px solid #fcd34d; border-radius: 10px;
      padding: 14px 16px; cursor: pointer; position: relative;
      transition: border-color .15s;
    }
    .bot-msg:hover { border-color: var(--accent) }
    .bot-msg p { font-size: 14px; color: #78350f; font-style: italic; margin: 0; padding-right: 60px; line-height: 1.6 }
    .bot-msg-badge {
      position: absolute; right: 12px; top: 12px;
      font-size: 10px; font-weight: 700; color: #92400e;
      background: #fde68a; padding: 3px 8px; border-radius: 4px;
    }
    .bot-msg.copied .bot-msg-badge { background: #bbf7d0; color: var(--green) }

    /* Command box */
    .cmd-box {
      background: #1e1e2e; border-radius: 8px;
      padding: 13px 14px; margin: 12px 0; cursor: pointer;
      display: flex; align-items: center; gap: 10px;
      transition: opacity .15s;
    }
    .cmd-box:hover { opacity: .9 }
    .cmd-box code { flex: 1; font-size: 13px; color: #a5b4fc; background: none; padding: 0; white-space: pre-wrap; word-break: break-all; line-height: 1.6 }
    .cmd-box-copy { font-size: 10px; font-weight: 700; color: rgba(255,255,255,.25); flex-shrink: 0; white-space: nowrap }
    .cmd-box.copied .cmd-box-copy { color: #6ee7b7 }

    /* Confirm check */
    .confirm-check {
      margin: 20px 0 0;
      padding: 16px; border: 1.5px solid var(--border);
      border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 12px;
      transition: border-color .15s, background .15s;
    }
    .confirm-check:hover { border-color: var(--accent); background: var(--accent-bg) }
    .confirm-check.checked { border-color: var(--green); background: var(--green-bg) }
    .check-box {
      width: 20px; height: 20px; border-radius: 5px; border: 2px solid var(--border);
      flex-shrink: 0; display: flex; align-items: center; justify-content: center;
      transition: all .15s;
    }
    .confirm-check.checked .check-box { border-color: var(--green); background: var(--green) }
    .check-mark { display: none; color: #fff; font-size: 12px; font-weight: 800 }
    .confirm-check.checked .check-mark { display: block }
    .check-label { font-size: 14px; color: var(--body) }
    .confirm-check.checked .check-label { color: var(--text) }

    /* Note box */
    .note { padding: 12px 14px; border-radius: 8px; background: var(--border-light); font-size: 13px; color: var(--body); margin: 12px 0; line-height: 1.6 }

    /* Nav buttons */
    .step-nav { display: flex; gap: 10px; margin-top: 28px; align-items: center }
    .btn { padding: 11px 24px; border-radius: 9px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all .15s; font-family: var(--sans); border: none }
    .btn-primary { background: var(--accent); color: #fff }
    .btn-primary:hover { background: #a07d24 }
    .btn-primary:disabled { opacity: .4; cursor: not-allowed }
    .btn-secondary { background: var(--border-light); color: var(--body) }
    .btn-secondary:hover { background: var(--border) }
    .btn-skip { background: none; color: var(--dim); font-size: 13px; padding: 11px 16px; margin-left: auto }
    .btn-skip:hover { color: var(--body) }

    footer { text-align: center; padding: 20px; font-size: 12px; color: var(--dim) }
    footer a { color: var(--dim) } footer a:hover { color: var(--accent) }
  </style>
</head>
<body>

<header>
  <div class="logo">Bot Setup Guide <span>by Humanity Labs</span></div>
  <nav>
    <a href="https://openclaw.ai">OpenClaw</a>
    <a href="https://obsidianclaw.ai">ObsidianClaw</a>
  </nav>
</header>

<div class="wizard">
  <div class="progress" id="progress">
    <div class="progress-track"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
    <div class="progress-label" id="progressLabel">Getting started</div>
  </div>
  <div id="stepContainer"></div>
</div>

<footer>
  <a href="https://humanitylabs.org">Humanity Labs</a> Â· <a href="https://obsidianclaw.ai">ObsidianClaw</a> Â· <a href="https://openclaw.ai">OpenClaw</a>
</footer>

<script>
// â”€â”€â”€ Steps definition â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const steps = [

  // 0: Welcome
  {
    phase: '', title: 'Build your own AI assistant',
    body: `
      <p>This guide takes you from zero to a personal AI that runs 24/7 on your own machine â€” reads your files, searches the web, and chats with you from any device.</p>
      <p><strong>Before we start:</strong> where are you right now?</p>
    `,
    choices: [
      { label: "I'm starting from scratch", goto: 1 },
      { label: "OpenClaw is running, but I can't chat yet", goto: 8 },
      { label: "I can chat, I want the Obsidian sidebar", goto: 11 },
    ]
  },

  // 1: Pick a machine
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Pick a machine for your bot',
    body: `
      <p>Your bot needs a computer that stays on 24/7. Good options:</p>
      <ul>
        <li><strong>Mac mini or spare laptop</strong> â€” plug it in, close the lid, forget about it</li>
        <li><strong>Raspberry Pi</strong> â€” tiny, silent, $35</li>
        <li><strong>Cloud server</strong> â€” Hetzner or DigitalOcean start at $5/month, no hardware needed</li>
      </ul>
      <p>Don't use your daily laptop â€” you need something that runs while you're out.</p>
    `,
    confirm: 'I have a machine ready',
    next: 2
  },

  // 2: Open terminal
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Open a terminal on that machine',
    body: `
      <p>A terminal is how you type commands to the machine directly. Everything from here runs inside it.</p>
      <p><strong>Mac:</strong> Press <strong>Cmd + Space</strong>, type <strong>Terminal</strong>, press Enter.</p>
      <p><strong>Cloud server:</strong></p>
    `,
    cmd: 'ssh root@your-server-ip',
    confirm: 'Terminal is open',
    next: 3
  },

  // 3: Homebrew (Mac only step â€” skippable for servers)
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Install Homebrew (Mac only)',
    body: `
      <p>Homebrew installs other software for you. Paste this in the terminal and press Enter:</p>
    `,
    cmd: '/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"',
    body2: `<p>Takes 2â€“5 minutes. When it asks for your password, type it â€” nothing will appear, that's normal.</p>
      <p><em>Running a cloud server, not a Mac?</em> Skip this step.</p>`,
    confirm: 'Homebrew installed (or I\'m on a server)',
    next: 4
  },

  // 4: Install OpenClaw
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Install OpenClaw',
    body: `
      <p>OpenClaw is the AI brain. One command installs it and sets it to start automatically:</p>
    `,
    cmd: 'curl -fsSL https://openclaw.ai/install.sh | bash',
    body2: `<p>When it finishes, OpenClaw is running. It'll start automatically every time the machine turns on.</p>`,
    confirm: 'OpenClaw installed',
    next: 5
  },

  // 5: Install Tailscale
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Install Tailscale',
    body: `
      <p>Tailscale creates a private encrypted network between all your devices. Free for personal use.</p>
      <p><strong>On the bot's machine:</strong></p>
    `,
    cmd: '# Mac:\nbrew install --cask tailscale\n\n# Linux / cloud server:\ncurl -fsSL https://tailscale.com/install.sh | sh && sudo tailscale up',
    body2: `
      <p>Sign in to Tailscale and note the IP it shows â€” it starts with <code>100.x.x.x</code>. You'll need it soon.</p>
      <p><strong>Also install Tailscale on your phone and laptop</strong> using the same account: <a href="https://tailscale.com/download" target="_blank">tailscale.com/download</a></p>`,
    confirm: 'Tailscale running, I have the IP',
    next: 6
  },

  // 6: Bind to Tailscale
  {
    phase: 'Phase 1 Â· Bring it to life',
    title: 'Connect OpenClaw to Tailscale',
    body: `<p>Tell OpenClaw to listen on your Tailscale network:</p>`,
    cmd: 'openclaw config set gateway.bind tailnet\nopenclaw gateway restart',
    body2: `<p>Now open a browser on any device connected to Tailscale and go to:</p><p><code>http://[your Tailscale IP]:18789</code></p><p>You should see the OpenClaw dashboard.</p>`,
    confirm: 'Dashboard is open',
    next: 7
  },

  // 7: Phase 1 done
  {
    phase: 'Phase 1 complete âœ…',
    title: 'Your bot is alive',
    body: `
      <p>OpenClaw is running 24/7 on your machine and reachable over Tailscale.</p>
      <p>Next up: give it a way to hear you. We'll set up Telegram â€” it works on every device and takes 10 minutes.</p>
    `,
    next: 8, nextLabel: 'Set up Telegram â†’'
  },

  // 8: Install Telegram
  {
    phase: 'Phase 2 Â· Talk to it',
    title: 'Install Telegram',
    body: `
      <p>Telegram is how you'll talk to your bot. <a href="https://telegram.org/dl" target="_blank">Download it on your phone</a> if you haven't already.</p>
      <p>Already have Telegram? Skip ahead.</p>
    `,
    confirm: 'Telegram is on my phone',
    next: 9
  },

  // 9: Create Telegram bot
  {
    phase: 'Phase 2 Â· Talk to it',
    title: 'Create your bot',
    body: `
      <p>1. Open Telegram â†’ search for <strong>@BotFather</strong> â†’ tap it â†’ tap Start</p>
      <p>2. Send <code>/newbot</code> â†’ pick a name â†’ BotFather gives you a token</p>
      <p>3. Follow the <a href="https://docs.openclaw.ai/guides/telegram" target="_blank">OpenClaw Telegram guide</a> to paste the token into your config</p>
    `,
    confirm: 'Bot is created and token is saved',
    next: 10
  },

  // 10: Phase 2 done
  {
    phase: 'Phase 2 complete âœ…',
    title: 'Say hello',
    body: `
      <p>Open your bot in Telegram and send: <em>"Hey, are you there?"</em></p>
      <p>It should reply within a few seconds.</p>
      <p>You now have an AI assistant in your pocket that you can talk to from anywhere.</p>
    `,
    confirm: 'Bot replied',
    next: 11, nextLabel: 'Set up the sidebar â†’'
  },

  // 11: Phase 3 intro â€” let bot do it
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Let your bot guide you',
    body: `
      <p>You can talk to your bot right now on Telegram. The easiest way to finish setup is to just ask it to walk you through Phase 3.</p>
      <p>Copy this message and send it:</p>
    `,
    botMsg: `Help me set up Phase 3 from botsetupguide.com. I want to:
1) Install Obsidian on all my devices (my phone, my laptop, and your machine)
2) Set up Obsidian Sync so all devices stay in sync
3) Install the ObsidianClaw plugin so I can chat with you in a sidebar

Ask me what device I'm setting up first and walk me through it step by step.`,
    body2: `<p>Your bot will read this page and guide you through everything. If you'd rather do it yourself, tap Next.</p>`,
    next: 12, nextLabel: 'Do it myself â†’', skipLabel: 'My bot is helping me'
  },

  // 12: Install Obsidian everywhere
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Install Obsidian on 3 places',
    body: `
      <p>Obsidian is a free note app. Your bot's files live in it. Install it on:</p>
      <ul>
        <li><strong>ğŸ“± Phone:</strong> <a href="https://apps.apple.com/app/obsidian-connected-notes/id1557175442" target="_blank">iPhone</a> or <a href="https://play.google.com/store/apps/details?id=md.obsidian" target="_blank">Android</a></li>
        <li><strong>ğŸ’» Laptop:</strong> <a href="https://obsidian.md/download" target="_blank">obsidian.md/download</a></li>
        <li><strong>ğŸ¤– Bot's machine (Mac):</strong></li>
      </ul>
    `,
    cmd: 'brew install --cask obsidian',
    body2: `<p>Then open Obsidian on the bot's machine â†’ "Open folder as vault" â†’ press <strong>Cmd+Shift+G</strong> â†’ type <code>~/.openclaw/workspace</code> â†’ Open.</p>
    <div class="note">Cloud server with no screen? Tell your bot on Telegram: <em>"Install Obsidian on your machine and open ~/.openclaw/workspace as a vault."</em></div>`,
    confirm: 'Obsidian installed on all devices',
    next: 13
  },

  // 13: Tailscale on all devices
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Tailscale on phone and laptop too',
    body: `
      <p>You already have Tailscale on the bot's machine. Now add it to your phone and laptop.</p>
      <p><a href="https://tailscale.com/download" target="_blank">tailscale.com/download</a> â†’ install â†’ sign in with <strong>the same account</strong> as the bot's machine.</p>
      <p>Once signed in, open the Tailscale app on your phone. You should see the bot's machine in the list with its <code>100.x.x.x</code> IP address.</p>
    `,
    confirm: 'All 3 devices are on Tailscale',
    next: 14
  },

  // 14: Obsidian Sync
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Sync files with Obsidian Sync',
    body: `
      <p><a href="https://obsidian.md/sync" target="_blank">Obsidian Sync</a> costs $4/month. It keeps all your notes â€” and your bot's notes â€” in sync across every device, encrypted.</p>
      <p><strong>On the bot's machine:</strong> Obsidian â†’ Settings â†’ Core plugins â†’ Sync â†’ turn on â†’ sign in â†’ "Create new remote vault"</p>
      <p><strong>On your phone and laptop:</strong> same thing â€” Settings â†’ Sync â†’ sign in with the same account â†’ select the vault you just made.</p>
      <p>When your bot writes a note, it appears on your phone in seconds. âœ…</p>
    `,
    note: 'Free alternative: Syncthing (open-source, peer-to-peer) also works â€” but has no native iPhone app.',
    confirm: 'Obsidian Sync is set up',
    next: 15
  },

  // 15: Install BRAT + plugin
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Install ObsidianClaw',
    body: `
      <p>Do this on your phone, laptop, and the bot's machine:</p>
      <p><strong>Step 1:</strong> Obsidian â†’ Settings â†’ Community Plugins â†’ turn off Safe Mode â†’ Browse â†’ search <strong>BRAT</strong> â†’ Install â†’ Enable</p>
      <p><strong>Step 2:</strong> Settings â†’ BRAT â†’ "Add Beta Plugin" â†’ paste this:</p>
    `,
    cmd: 'oscarhenrycollins/obsidianclaw',
    body2: `<p>â†’ click "Add Plugin". It installs automatically.</p>
    <div class="note">ObsidianClaw is pending in the official plugin store. BRAT installs it early. When we're approved, you won't need BRAT anymore.</div>`,
    confirm: 'Plugin installed on all devices',
    next: 16
  },

  // 16: Run setup wizard
  {
    phase: 'Phase 3 Â· See what it does',
    title: 'Connect the plugin',
    body: `
      <p>A setup wizard opens automatically in Obsidian. It will ask for two things:</p>
      <p><strong>Gateway URL:</strong> <code>ws://[bot's Tailscale IP]:18789</code><br>Find the IP in the Tailscale app.</p>
      <p><strong>Auth token:</strong> run this on the bot's machine:</p>
    `,
    cmd: 'cat ~/.openclaw/openclaw.json | grep token',
    body2: `<p>The wizard tests the connection and guides you through approving this device. If it fails, run this on the bot's machine:</p>`,
    cmd2: 'openclaw doctor --fix && openclaw gateway restart',
    body3: `<p>Or just tell your bot on Telegram: <em>"My ObsidianClaw plugin can't connect. Help me fix it."</em></p>`,
    confirm: 'Wizard completed, I can see the chat sidebar',
    next: 17
  },

  // 17: Done
  {
    phase: 'ğŸ‰ All done',
    title: 'You\'re set up',
    body: `
      <p>Your personal AI is running 24/7, synced across all your devices, and visible right inside Obsidian.</p>
      <p>You can now:</p>
      <ul>
        <li>Chat with it in the Obsidian sidebar on your phone, laptop, and anywhere</li>
        <li>Watch it read files, search the web, and run commands in real time</li>
        <li>Send any note as context: <strong>Cmd+P â†’ "Ask about this note"</strong></li>
        <li>Talk to it on Telegram from anywhere, even when Obsidian isn't open</li>
      </ul>
    `,
    isDone: true
  }
];

// â”€â”€â”€ Wizard engine â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

let current = 0;

function render(index) {
  current = index;
  const step = steps[index];
  const total = steps.length - 1;
  const pct = Math.round((index / total) * 100);

  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressLabel').textContent =
    step.isDone ? 'Complete!' : (step.phase || `Step ${index + 1} of ${total}`);

  const container = document.getElementById('stepContainer');
  container.innerHTML = '';

  const card = document.createElement('div');
  card.className = 'step-card';

  let html = '';
  if (step.phase) html += `<div class="step-phase">${step.phase}</div>`;
  html += `<div class="step-title">${step.title}</div>`;
  html += `<div class="step-body">`;
  if (step.body) html += step.body;
  html += `</div>`;

  // Choices (quiz style)
  if (step.choices) {
    html += `<div style="display:flex;flex-direction:column;gap:10px;margin-top:20px">`;
    step.choices.forEach((c, i) => {
      html += `<button class="confirm-check" id="choice${i}" onclick="goTo(${c.goto})" style="cursor:pointer;text-align:left">
        <div class="check-box"><span class="check-mark">â†’</span></div>
        <span class="check-label">${c.label}</span>
      </button>`;
    });
    html += `</div>`;
  }

  // Command box(es)
  if (step.cmd) {
    html += `<div class="cmd-box" id="cmd1" onclick="copyCmd(this,'${escapeAttr(step.cmd)}')">
      <code>${escapeHtml(step.cmd)}</code>
      <span class="cmd-box-copy">copy</span>
    </div>`;
  }
  if (step.body2) html += `<div class="step-body">${step.body2}</div>`;
  if (step.cmd2) {
    html += `<div class="cmd-box" id="cmd2" onclick="copyCmd(this,'${escapeAttr(step.cmd2)}')">
      <code>${escapeHtml(step.cmd2)}</code>
      <span class="cmd-box-copy">copy</span>
    </div>`;
  }
  if (step.body3) html += `<div class="step-body">${step.body3}</div>`;
  if (step.note) html += `<div class="note">${step.note}</div>`;

  // Bot message
  if (step.botMsg) {
    html += `<div class="bot-msg" id="botMsgEl" onclick="copyBotMsg()">
      <span class="bot-msg-badge">tap to copy</span>
      <p>${escapeHtml(step.botMsg)}</p>
    </div>`;
  }

  // Confirm checkbox
  if (step.confirm && !step.isDone) {
    html += `<div class="confirm-check" id="confirmBox" onclick="toggleConfirm()">
      <div class="check-box"><span class="check-mark">âœ“</span></div>
      <span class="check-label">${step.confirm}</span>
    </div>`;
  }

  // Nav
  if (!step.choices) {
    html += `<div class="step-nav">`;
    if (index > 0) {
      html += `<button class="btn btn-secondary" onclick="goTo(${index - 1})">â† Back</button>`;
    }
    if (!step.isDone) {
      const nextLabel = step.nextLabel || 'Next â†’';
      const disabled = step.confirm ? 'disabled id="nextBtn"' : 'id="nextBtn"';
      html += `<button class="btn btn-primary" ${disabled} onclick="goTo(${step.next})">${nextLabel}</button>`;
      if (step.skipLabel) {
        html += `<button class="btn btn-skip" onclick="goTo(${step.next})">${step.skipLabel}</button>`;
      }
    } else {
      html += `<a href="https://obsidianclaw.ai" class="btn btn-primary" style="text-decoration:none">Learn more about ObsidianClaw â†’</a>`;
    }
    html += `</div>`;
  }

  card.innerHTML = html;
  container.appendChild(card);

  // Scroll to top
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function goTo(index) {
  if (index >= 0 && index < steps.length) render(index);
}

function toggleConfirm() {
  const box = document.getElementById('confirmBox');
  if (!box) return;
  box.classList.toggle('checked');
  const btn = document.getElementById('nextBtn');
  if (btn) btn.disabled = !box.classList.contains('checked');
}

function copyCmd(el, cmd) {
  navigator.clipboard.writeText(cmd.replace(/\\n/g, '\n'));
  el.classList.add('copied');
  const s = el.querySelector('.cmd-box-copy'); if (s) s.textContent = 'copied âœ“';
  setTimeout(() => { el.classList.remove('copied'); if (s) s.textContent = 'copy' }, 1500);
}

function copyBotMsg() {
  const step = steps[current];
  if (!step.botMsg) return;
  navigator.clipboard.writeText(step.botMsg);
  const el = document.getElementById('botMsgEl');
  if (el) {
    el.classList.add('copied');
    const b = el.querySelector('.bot-msg-badge'); if (b) b.textContent = 'copied âœ“';
    setTimeout(() => { el.classList.remove('copied'); if (b) b.textContent = 'tap to copy' }, 2000);
  }
}

function escapeHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}
function escapeAttr(s) {
  return s.replace(/'/g,"\\'").replace(/\n/g,'\\n');
}

// Init
render(0);
</script>
</body>
</html>
